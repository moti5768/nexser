/* ご提示のスタイルをすべて維持 */

/* ===== Explorer ヘッダー ===== */
.explorer-header {
    display: flex;
    align-items: center;
    padding: 4px;
    background: #C3C7CB;
}

.explorer-separator {
    height: 1.5px;
    background-color: white;
    box-shadow: 0 -1.5px 0 #7a7a7a;
    margin: 0px 0;
}

.explorer-header button {
    margin-right: 8px;
    width: 26px;
    height: 26px;
    cursor: pointer;
}

.path-label {
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-left: 5px;
}

.explorer-container {
    display: flex;
    flex-direction: column;
    height: 100%;
    padding: 0;
}

.explorer-list {
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    flex-direction: column;
    overflow-y: auto;
    overflow-x: auto;
    height: 100%;
    box-sizing: border-box;
}

/* 修正箇所：既存の div 指定を詳細表示に干渉させないよう調整 */
.explorer-list .explorer-item {
    cursor: pointer;
    /* display: flex は各 view モード側で定義するためここでは指定しない */
}

/* ファイル内容表示用 */
.file-content {
    white-space: pre-wrap;
    padding: 6px;
    font-family: Consolas, monospace;
}

/* アイコン表示モード */
/* アイコン表示モード */
.icon-view {
    display: flex !important;
    flex-direction: column;
    align-items: center;
    text-align: center;
    padding: 5px;
    /* 10pxから少し詰める */
    width: 100%;
    /* JS側のGrid幅(100px)に従う */
    height: 110px;
    /* 115pxから95pxに短縮して余白をカット */
    /* float: left; ← これを削除 */
    box-sizing: border-box;
    overflow: hidden;
}

.item-name-label {
    display: block;
    display: -webkit-box;
    -webkit-box-orient: vertical;
    line-clamp: 2;
    -webkit-line-clamp: 2;
    overflow: hidden;
    /* 以下、レイアウト調整 */
    font-size: 12px;
    word-break: break-all;
    margin-top: 2px;
    line-height: 1.2;
    width: 100%;
    text-align: center;
}

.item-icon-large {
    font-size: 40px;
    margin-bottom: 5px;
}

/* 修正箇所：詳細表示モード (レイアウト崩れ防止版) */
/* 修正箇所：詳細表示モード (レイアウト崩れ防止・省略対応版) */
.details-view {
    display: grid !important;
    /* 1列目:アイコン, 2列目:名前(最小値0で伸縮), 3列目:種類(固定), 4列目:サイズ(固定) */
    grid-template-columns: 24px minmax(0, 1fr) 100px 80px;
    gap: 8px;
    padding: 4px 12px;
    border-bottom: 1px solid #eee;
    font-size: 12px;
    align-items: center;
    width: 100%;
    box-sizing: border-box;
}

/* 名前テキストが長すぎる場合に「...」で省略する設定 */
.item-name-text {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    min-width: 0;
    /* Grid内での省略を有効にするために必要 */
}

.item-type-text,
.item-size-text {
    color: #666;
    white-space: nowrap;
    /* 種類やサイズが改行されるのを防ぐ */
}

.item-size-text {
    text-align: right;
}

/* リスト表示モード */
.list-view {
    display: flex !important;
    align-items: center;
    gap: 6px;
    padding: 4px 12px;
    font-size: 12px;
}

.item-icon-small {
    font-size: 16px;
    width: 20px;
    text-align: center;
}

/* 選択時のハイライト */
.explorer-item.selected {
    background-color: #000080 !important;
    color: white !important;
}

.explorer-item.selected span {
    color: white !important;
}

/* Ribbon メニュー (維持) */
.ribbon-menu {
    position: relative;
    display: inline-block;
    padding: 0;
    cursor: pointer;
    user-select: none;
}

.ribbon-title {
    display: inline-block;
    padding: 4px 12px;
    border: 1.5px solid transparent;
    box-sizing: border-box;
}

.ribbon-menu:hover .ribbon-title {
    color: black;
    background-color: #C3C7CB;
    border: 1.5px solid #808080;
    border-color: #fff #808080 #808080 #fff;
    box-shadow: 0.5px 0.5px black;
}

.ribbon-menu.selected .ribbon-title {
    background-color: #C3C7CB;
    border: 1.5px solid;
    border-color: #7a7a7a #fff #fff #7a7a7a;
    box-shadow: 0.5px 0.5px 0 #000 inset;
    transform: translate(0.5px, 0.5px);
}

.ribbon-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    background: #C3C7CB;
    color: black;
    border: 1px solid;
    border-color: #fff #404040 #404040 #fff;
    box-shadow: 1px 1px black;
    display: none;
    min-width: 200px;
    z-index: 1000;
}

.ribbon-item {
    padding: 4px 8px;
    cursor: pointer;
    display: block;
    white-space: nowrap;
}

.ribbon-item:hover {
    background: darkblue;
    color: white;
}